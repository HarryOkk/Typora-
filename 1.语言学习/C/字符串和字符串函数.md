# 一、前期学习

## 1. 背景

​	Linux系统的重要特点是“一切皆是文本流，万物皆是文件“。 所以在Linux环境下使用C语言进行编程的时候，会涉及到大量的字符/字符串处理和格式化输入输出，这就需要Linux嵌入式软件工程师对C语言的字符串处理熟练掌握。

## 2. 字符串和格式化输入输出

​	单从常量数据类型来讲，有字符类型（单引号）和字符串类型（双引号）。

### 2.1 char类型数组和null字符

#### 空字符、字符串和字符数组

**空字符:**非打印字符，C语言中用来标记字符串的结束。ASCII码值为0。

<img src="../../6.图片/image-20240111160024658.png" alt="image-20240111160024658" style="zoom:50%;" />

> **注意！**
>
> 1. C语言字符串都存储在char类型数组中
> 2. char类型数组长度必须比待存储字符串的字符数多1，余下的用于存储null
> 3. char类型的大小为一个字节（Byte），也就是8位二进制
> 4. 定义char数组的时候，比如char name[5]，即**分配了一个5字节空间的buf**
> 5. 使用字符串必须创建字符数组
> 6. 除了对字符数组元素的精细操作之外，null字符有编译器自动在IO过程填入，我们只需要在字符数组的操作过程中注意给其预留空间即可（char name[5]的数组中只能有4个空间有值）

---



#### stdio中的字符串输入输出

**输入一个单词：scanf**

> 1. `scanf("%s", name);`
>    1. %s指定输入类型为字符串；name为赋值变量的地址
>    2. stdin中遇到第一个空白（空格、制表符和换行符）的时候便终止IO，也就是输入一个单词

**输入一个字符串：基于行的流IO，fgets()**

> 1. 遇到换行符的时候终止IO，并且不读入\n

**标准输出：printf()**

> 1. ```c
>    printf("circumference = %1.2f, area = %1.2f\n", circum,area);
>    ```
>
> 2. %1.2f表示格式化输出结果四舍五入并保留两位小数，数据类型为浮点型float

---

#### 字符串和字符数组的区别

**“x”和'x'的区别**

1. ‘x’为基本数据类型char；“x”为派生数据类型char数组
2. “x”有两个字符组成，'x'和'\0'

---

#### strlen()函数和sizeof()函数

>  **sizeof()：**返回对象的字节数（buf的总大小）
>
> 1. 计算整个字符数组的buf长度（bytes）



> **strlen()：**返回字符串的字符长度
>
> 1. 长度计算不包含null
> 2. 如果字符数组没被填满，其计算的是被填满的字符串长度
>
> 

### 2.2 常量和C预处理器

#### 符号常量和预处理

> ```c
> //下面是符号常量的定义
> #define NAME value
> ```
>
> 注意：
>
> 1. 符号常量名要大写，这是C语言的约定俗成的规定，方便阅读
> 2. 结尾不加分号
> 3. **常用来定义字符或字符串常量**
> 4. 替换过程由预处理器完成
> 5. 降低代码维护成本
>
> 扩展：变量命名的约定俗成规矩，在名称前带c_或k_前缀来表示常量（如c_level或k_line）。



#### const限定符

**说明：**

1. 用于限定一个变量为只读，代码中不可更改

---

**明示常量**

```c
//定义在头文件limits.h和float.h中的一些符号常量，可以根据计算机位来判断数据类型的值范围
#include <limits.h>
#include <float.h>
#define INT_MAX +32767
#define INT_MIN -32768

```

### 2.3 转义字符说明

[【C语言】转义字符（\a \b \t \v \f \r 等）_c语言转义字符-CSDN博客](https://blog.csdn.net/m0_74102736/article/details/129342417)

![image-20240808104001651](../../6.图片/image-20240808104001651.png)

# 二、C primer plus第11章：字符串和字符串函数

## 1、表示字符串和字符串的IO

### 1.1定义字符串

**字符串字面量（字符串常量）：**双引号括起来的内容

**字符串字面量的内存存储方式：**双引号中的字符和编译器自动加入末尾的\0（字符串结束符）

**注意：**

1、字符串字面量的书写：多个双引号自动拼接（ANSI C）

```c
"hello"" world" == "hello world"
```

2、字符串内使用双引号，必须加一个反斜杠（\）

```c
printf("\"Run, Spot, run!\" exclaimed Dick.\n");
```

输出：“Run, Spot, run!” exclaimed Dick.

3、字符串常量属于静态存储类别：定义后在程序整个生命周期中均存在，且因为是常量，仅会被赋值一次

**4、双引号括起来的内容为指向字符串存储位置的指针。**

### 1.2字符串数组和初始化

**字符数组初始化：**

1、指定数组大小

```c
/*
注意：
1、指定的数组元素个数至少比字符串长度多1（为了容纳空字符）
2、数组中未被使用的元素自动初始化为\0
*/
const char m1[40] = "Limit yourself to one line's worth.";
```

2、让编译器确定初始化字符数组的大小（**推荐**）

```c
const char m2[] = "If you can't think of anything, fake it.";
```

3、指针表示法（推荐）

```c
const char *pt1 = "Something"
```

